#   Аттестационное задание

# Задание
1. Создать веб-приложение, с API интерфейсом и админ-панелью.
2. Создать базу данных используя миграции Django.

# Технические требования:
* Python 3.8+
* Django 3+
* DRF 3.10+
* PostgreSQL 10+

# Требования к реализации:

**1.** Необходимо реализовать модель сети по продаже электроники.
Сеть должна представлять собой иерархическую структуру из 3 уровней:

* Завод;
* Розничная сеть;
* Индивидуальный предприниматель.

Каждое звено сети ссылается только на одного поставщика оборудования 
(не обязательно предыдущего по иерархии). Важно отметить, что уровень иерархии 
определяется не названием звена, а отношением к остальным элементам сети, 
т.е. завод всегда находится на 0 уровне, а если розничная сеть относится напрямую к заводу, 
минуя остальные звенья - её уровень - 1.

**2.** Сделать вывод в админ-панели созданных объектов.

**3.** На странице объекта сети добавить:
* ссылку на «Поставщика»;
* фильтр по названию города;
* «admin action», очищающий задолженность перед поставщиком у выбранных объектов.

**4.** Используя DRF, создать набор представлений:
* CRUD для модели поставщика (запретить обновление через API поля «Задолженность перед поставщиком»);
* Добавить возможность фильтрации объектов по определенной стране.
* Настроить права доступа к API так, чтобы только активные сотрудники имели доступ к API.

## Виртуальное окружение

В проекте используется Poetry, все зависимости создаются автоматически с помощью файлов 'pyproject.toml' и 'poetry.lock'
   
## Переменные окружения

Создать файл '.env', добавить в него переменные окружения из '.env.sample'

`SECRET_KEY`,
`POSTGRES_USER`,
`POSTGRES_PASSWORD`,
`POSTGRES_DB`,
`POSTGRES_PORT`,
`POSTGRES_HOST`

## Запуск проекта

Применить миграции командой:

```bash
python3 manage.py migrate
```
Запустить файл users/management/commands/csu.py командой:

```bash
python3 manage.py csu
```
Запустить сервер командой:

```bash
python3 manage.py runserver
```


## Заполнение базы данных

Заполнение базы данных можно осуществить через Django Admin по ссылке:

[Django Admin](http://localhost:8000/admin/)


## Документация 

Документация API доступна после запуска сервера по ссылкам:

[Swagger](http://localhost:8000/swagger/)

[Redoc](http://localhost:8000/redoc/)